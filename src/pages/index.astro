---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import { getCollection } from 'astro:content';
const posts = Object.values(import.meta.glob('./posts/*.md', { eager: true }))
  .sort((a, b) => {
    const da = a.frontmatter?.date ? new Date(a.frontmatter.date) : 0;
    const db = b.frontmatter?.date ? new Date(b.frontmatter.date) : 0;
    return db - da; // newest first; use da - db for oldest first
  });
---

<BaseLayout title="welcome-home">
  <Header/>
  <main>
  <h1>Welcome :)</h1>
  <a href="read-list">things i've read</a> 
  <br>
  <a href="reading-list">things i want to read</a>
  <br>
  <a href="about-me">more about me :)</a>
  <br>
  </main>
</BaseLayout>

<p>Things i'm learning:</p>
<ul class="posts">
  {posts.map(post => {
    const raw = post.frontmatter?.date;
    const formatted = raw
      ? new Date(raw).toLocaleDateString(undefined, { month: 'short', year: 'numeric' }) // e.g. "Oct"
      : '';
    return (
      <li>
        {raw ? <time class="post-date" datetime={raw}>{formatted}</time> : <span class="post-date" />}
        <a href={post.url}>{post.frontmatter.title}</a>
      </li>
    );
  })}
</ul>

<style>
  .posts { list-style: none; padding: 0; margin: 0; }
  .posts li { display: flex; align-items: center; gap: 0.6rem; padding: 0.25rem 0; }
  .post-date { width: 3.25rem; color: #6b7280; font-size: 0.95rem; text-align: left; }
</style>